 /*
 * # Semantic UI - 2.4.0
 * https://github.com/Semantic-Org/Semantic-UI
 * http://www.semantic-ui.com/
 *
 * Copyright 2014 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(p,h,b,v){p.site=p.fn.site=function(e){var a,c,i=(new Date).getTime(),r=[],t=e,n="string"==typeof t,l=[].slice.call(arguments,1),u=p.isPlainObject(e)?p.extend(!0,{},p.site.settings,e):p.extend({},p.site.settings),o=u.namespace,d=u.error,s="module-"+o,f=p(b),g=this,m=f.data(s);return a={initialize:function(){a.instantiate()},instantiate:function(){a.verbose("Storing instance of site",a),m=a,f.data(s,a)},normalize:function(){a.fix.console(),a.fix.requestAnimationFrame()},fix:{console:function(){a.debug("Normalizing window.console"),console!==v&&console.log!==v||(a.verbose("Console not available, normalizing events"),a.disable.console()),void 0!==console.group&&void 0!==console.groupEnd&&void 0!==console.groupCollapsed||(a.verbose("Console group not available, normalizing events"),h.console.group=function(){},h.console.groupEnd=function(){},h.console.groupCollapsed=function(){}),void 0===console.markTimeline&&(a.verbose("Mark timeline not available, normalizing events"),h.console.markTimeline=function(){})},consoleClear:function(){a.debug("Disabling programmatic console clearing"),h.console.clear=function(){}},requestAnimationFrame:function(){a.debug("Normalizing requestAnimationFrame"),h.requestAnimationFrame===v&&(a.debug("RequestAnimationFrame not available, normalizing event"),h.requestAnimationFrame=h.requestAnimationFrame||h.mozRequestAnimationFrame||h.webkitRequestAnimationFrame||h.msRequestAnimationFrame||function(e){setTimeout(e,0)})}},moduleExists:function(e){return p.fn[e]!==v&&p.fn[e].settings!==v},enabled:{modules:function(e){var n=[];return e=e||u.modules,p.each(e,function(e,t){a.moduleExists(t)&&n.push(t)}),n}},disabled:{modules:function(e){var n=[];return e=e||u.modules,p.each(e,function(e,t){a.moduleExists(t)||n.push(t)}),n}},change:{setting:function(r,o,e,s){e="string"==typeof e?"all"===e?u.modules:[e]:e||u.modules,s=s===v||s,p.each(e,function(e,t){var n,i=!a.moduleExists(t)||(p.fn[t].settings.namespace||!1);a.moduleExists(t)&&(a.verbose("Changing default setting",r,o,t),p.fn[t].settings[r]=o,s&&i&&0<(n=p(":data(module-"+i+")")).length&&(a.verbose("Modifying existing settings",n),n[t]("setting",r,o)))})},settings:function(i,e,r){e="string"==typeof e?[e]:e||u.modules,r=r===v||r,p.each(e,function(e,t){var n;a.moduleExists(t)&&(a.verbose("Changing default setting",i,t),p.extend(!0,p.fn[t].settings,i),r&&o&&0<(n=p(":data(module-"+o+")")).length&&(a.verbose("Modifying existing settings",n),n[t]("setting",i)))})}},enable:{console:function(){a.console(!0)},debug:function(e,t){e=e||u.modules,a.debug("Enabling debug for modules",e),a.change.setting("debug",!0,e,t)},verbose:function(e,t){e=e||u.modules,a.debug("Enabling verbose debug for modules",e),a.change.setting("verbose",!0,e,t)}},disable:{console:function(){a.console(!1)},debug:function(e,t){e=e||u.modules,a.debug("Disabling debug for modules",e),a.change.setting("debug",!1,e,t)},verbose:function(e,t){e=e||u.modules,a.debug("Disabling verbose debug for modules",e),a.change.setting("verbose",!1,e,t)}},console:function(e){if(e){if(m.cache.console===v)return void a.error(d.console);a.debug("Restoring console function"),h.console=m.cache.console}else a.debug("Disabling console function"),m.cache.console=h.console,h.console={clear:function(){},error:function(){},group:function(){},groupCollapsed:function(){},groupEnd:function(){},info:function(){},log:function(){},markTimeline:function(){},warn:function(){}}},destroy:function(){a.verbose("Destroying previous site for",f),f.removeData(s)},cache:{},setting:function(e,t){if(p.isPlainObject(e))p.extend(!0,u,e);else{if(t===v)return u[e];u[e]=t}},internal:function(e,t){if(p.isPlainObject(e))p.extend(!0,a,e);else{if(t===v)return a[e];a[e]=t}},debug:function(){u.debug&&(u.performance?a.performance.log(arguments):(a.debug=Function.prototype.bind.call(console.info,console,u.name+":"),a.debug.apply(console,arguments)))},verbose:function(){u.verbose&&u.debug&&(u.performance?a.performance.log(arguments):(a.verbose=Function.prototype.bind.call(console.info,console,u.name+":"),a.verbose.apply(console,arguments)))},error:function(){a.error=Function.prototype.bind.call(console.error,console,u.name+":"),a.error.apply(console,arguments)},performance:{log:function(e){var t,n;u.performance&&(n=(t=(new Date).getTime())-(i||t),i=t,r.push({Element:g,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(a.performance.timer),a.performance.timer=setTimeout(a.performance.display,500)},display:function(){var e=u.name+":",n=0;i=!1,clearTimeout(a.performance.timer),p.each(r,function(e,t){n+=t["Execution Time"]}),e+=" "+n+"ms",(console.group!==v||console.table!==v)&&0<r.length&&(console.groupCollapsed(e),console.table?console.table(r):p.each(r,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),r=[]}},invoke:function(i,e,t){var r,o,n,s=m;return e=e||l,t=g||t,"string"==typeof i&&s!==v&&(i=i.split(/[\. ]/),r=i.length-1,p.each(i,function(e,t){var n=e!=r?t+i[e+1].charAt(0).toUpperCase()+i[e+1].slice(1):i;if(p.isPlainObject(s[n])&&e!=r)s=s[n];else{if(s[n]!==v)return o=s[n],!1;if(!p.isPlainObject(s[t])||e==r)return s[t]!==v?o=s[t]:a.error(d.method,i),!1;s=s[t]}})),p.isFunction(o)?n=o.apply(t,e):o!==v&&(n=o),p.isArray(c)?c.push(n):c!==v?c=[c,n]:n!==v&&(c=n),o}},n?(m===v&&a.initialize(),a.invoke(t)):(m!==v&&a.destroy(),a.initialize()),c!==v?c:this},p.site.settings={name:"Site",namespace:"site",error:{console:"Console cannot be restored, most likely it was overwritten outside of module",method:"The method you called is not defined."},debug:!1,verbose:!1,performance:!0,modules:["accordion","api","checkbox","dimmer","dropdown","embed","form","modal","nag","popup","rating","shape","sidebar","state","sticky","tab","transition","visit","visibility"],siteNamespace:"site",namespaceStub:{cache:{},config:{},sections:{},section:{},utilities:{}}},p.extend(p.expr[":"],{data:p.expr.createPseudo?p.expr.createPseudo(function(t){return function(e){return!!p.data(e,t)}}):function(e,t,n){return!!p.data(e,n[3])}})}(jQuery,window,document),function(F,j,P,E){"use strict";j=void 0!==j&&j.Math==Math?j:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),F.fn.search=function(c){var R,C=F(this),w=C.selector||"",T=(new Date).getTime(),S=[],k=c,q="string"==typeof k,A=[].slice.call(arguments,1);return F(this).each(function(){var f,l=F.isPlainObject(c)?F.extend(!0,{},F.fn.search.settings,c):F.extend({},F.fn.search.settings),g=l.className,u=l.metadata,d=l.regExp,o=l.fields,m=l.selector,p=l.error,e=l.namespace,i="."+e,t=e+"-module",h=F(this),b=h.find(m.prompt),n=h.find(m.searchButton),r=h.find(m.results),s=h.find(m.result),v=(h.find(m.category),this),a=h.data(t),y=!1,x=!1;f={initialize:function(){f.verbose("Initializing module"),f.get.settings(),f.determine.searchFields(),f.bind.events(),f.set.type(),f.create.results(),f.instantiate()},instantiate:function(){f.verbose("Storing instance of module",f),a=f,h.data(t,f)},destroy:function(){f.verbose("Destroying instance"),h.off(i).removeData(t)},refresh:function(){f.debug("Refreshing selector cache"),b=h.find(m.prompt),n=h.find(m.searchButton),h.find(m.category),r=h.find(m.results),s=h.find(m.result)},refreshResults:function(){r=h.find(m.results),s=h.find(m.result)},bind:{events:function(){f.verbose("Binding events to search"),l.automatic&&(h.on(f.get.inputEvent()+i,m.prompt,f.event.input),b.attr("autocomplete","off")),h.on("focus"+i,m.prompt,f.event.focus).on("blur"+i,m.prompt,f.event.blur).on("keydown"+i,m.prompt,f.handleKeyboard).on("click"+i,m.searchButton,f.query).on("mousedown"+i,m.results,f.event.result.mousedown).on("mouseup"+i,m.results,f.event.result.mouseup).on("click"+i,m.result,f.event.result.click)}},determine:{searchFields:function(){c&&c.searchFields!==E&&(l.searchFields=c.searchFields)}},event:{input:function(){l.searchDelay?(clearTimeout(f.timer),f.timer=setTimeout(function(){f.is.focused()&&f.query()},l.searchDelay)):f.query()},focus:function(){f.set.focus(),l.searchOnFocus&&f.has.minimumCharacters()&&f.query(function(){f.can.show()&&f.showResults()})},blur:function(e){var t=P.activeElement===this,n=function(){f.cancel.query(),f.remove.focus(),f.timer=setTimeout(f.hideResults,l.hideDelay)};t||(x=!1,f.resultsClicked?(f.debug("Determining if user action caused search to close"),h.one("click.close"+i,m.results,function(e){f.is.inMessage(e)||y?b.focus():(y=!1,f.is.animating()||f.is.hidden()||n())})):(f.debug("Input blurred without user action, closing results"),n()))},result:{mousedown:function(){f.resultsClicked=!0},mouseup:function(){f.resultsClicked=!1},click:function(e){f.debug("Search result selected");var t=F(this),n=t.find(m.title).eq(0),i=t.is("a[href]")?t:t.find("a[href]").eq(0),r=i.attr("href")||!1,o=i.attr("target")||!1,s=(n.html(),0<n.length&&n.text()),a=f.get.results(),c=t.data(u.result)||f.get.result(s,a);if(F.isFunction(l.onSelect)&&!1===l.onSelect.call(v,c,a))return f.debug("Custom onSelect callback cancelled default select action"),void(y=!0);f.hideResults(),s&&f.set.value(s),r&&(f.verbose("Opening search link found in result",i),"_blank"==o||e.ctrlKey?j.open(r):j.location.href=r)}}},handleKeyboard:function(e){var t,n=h.find(m.result),i=h.find(m.category),r=n.filter("."+g.active),o=n.index(r),s=n.length,a=0<r.length,c=e.which,l=13,u=38,d=40;if(c==27&&(f.verbose("Escape key pressed, blurring search field"),f.hideResults(),x=!0),f.is.visible())if(c==l){if(f.verbose("Enter key pressed, selecting active result"),0<n.filter("."+g.active).length)return f.event.result.click.call(n.filter("."+g.active),e),e.preventDefault(),!1}else c==u&&a?(f.verbose("Up key pressed, changing active result"),t=o-1<0?o:o-1,i.removeClass(g.active),n.removeClass(g.active).eq(t).addClass(g.active).closest(i).addClass(g.active),e.preventDefault()):c==d&&(f.verbose("Down key pressed, changing active result"),t=s<=o+1?o:o+1,i.removeClass(g.active),n.removeClass(g.active).eq(t).addClass(g.active).closest(i).addClass(g.active),e.preventDefault());else c==l&&(f.verbose("Enter key pressed, executing query"),f.query(),f.set.buttonPressed(),b.one("keyup",f.remove.buttonFocus))},setup:{api:function(t,n){var e={debug:l.debug,on:!1,cache:l.cache,action:"search",urlData:{query:t},onSuccess:function(e){f.parse.response.call(v,e,t),n()},onFailure:function(){f.displayMessage(p.serverError),n()},onAbort:function(e){},onError:f.error};F.extend(!0,e,l.apiSettings),f.verbose("Setting up API request",e),h.api(e)}},can:{useAPI:function(){return F.fn.api!==E},show:function(){return f.is.focused()&&!f.is.visible()&&!f.is.empty()},transition:function(){return l.transition&&F.fn.transition!==E&&h.transition("is supported")}},is:{animating:function(){return r.hasClass(g.animating)},hidden:function(){return r.hasClass(g.hidden)},inMessage:function(e){if(e.target){var t=F(e.target);return F.contains(P.documentElement,e.target)&&0<t.closest(m.message).length}},empty:function(){return""===r.html()},visible:function(){return 0<r.filter(":visible").length},focused:function(){return 0<b.filter(":focus").length}},get:{settings:function(){F.isPlainObject(c)&&c.searchFullText&&(l.fullTextSearch=c.searchFullText,f.error(l.error.oldSearchSyntax,v))},inputEvent:function(){var e=b[0];return e!==E&&e.oninput!==E?"input":e!==E&&e.onpropertychange!==E?"propertychange":"keyup"},value:function(){return b.val()},results:function(){return h.data(u.results)},result:function(n,e){var i=["title","id"],r=!1;return n=n!==E?n:f.get.value(),e=e!==E?e:f.get.results(),"category"===l.type?(f.debug("Finding result that matches",n),F.each(e,function(e,t){if(F.isArray(t.results)&&(r=f.search.object(n,t.results,i)[0]))return!1})):(f.debug("Finding result in results object",n),r=f.search.object(n,e,i)[0]),r||!1}},select:{firstResult:function(){f.verbose("Selecting first result"),s.first().addClass(g.active)}},set:{focus:function(){h.addClass(g.focus)},loading:function(){h.addClass(g.loading)},value:function(e){f.verbose("Setting search input value",e),b.val(e)},type:function(e){e=e||l.type,"category"==l.type&&h.addClass(l.type)},buttonPressed:function(){n.addClass(g.pressed)}},remove:{loading:function(){h.removeClass(g.loading)},focus:function(){h.removeClass(g.focus)},buttonPressed:function(){n.removeClass(g.pressed)}},query:function(e){e=F.isFunction(e)?e:function(){};var t=f.get.value(),n=f.read.cache(t);e=e||function(){},f.has.minimumCharacters()?(n?(f.debug("Reading result from cache",t),f.save.results(n.results),f.addResults(n.html),f.inject.id(n.results),e()):(f.debug("Querying for",t),F.isPlainObject(l.source)||F.isArray(l.source)?(f.search.local(t),e()):f.can.useAPI()?f.search.remote(t,e):(f.error(p.source),e())),l.onSearchQuery.call(v,t)):f.hideResults()},search:{local:function(e){var t,n=f.search.object(e,l.content);f.set.loading(),f.save.results(n),f.debug("Returned full local search results",n),0<l.maxResults&&(f.debug("Using specified max results",n),n=n.slice(0,l.maxResults)),"category"==l.type&&(n=f.create.categoryResults(n)),t=f.generateResults({results:n}),f.remove.loading(),f.addResults(t),f.inject.id(n),f.write.cache(e,{html:t,results:n})},remote:function(e,t){t=F.isFunction(t)?t:function(){},h.api("is loading")&&h.api("abort"),f.setup.api(e,t),h.api("query")},object:function(i,t,e){var o=[],s=[],a=[],n=i.toString().replace(d.escape,"\\$&"),r=new RegExp(d.beginsWith+n,"i"),c=function(e,t){var n=-1==F.inArray(t,o),i=-1==F.inArray(t,a),r=-1==F.inArray(t,s);n&&i&&r&&e.push(t)};return t=t||l.source,e=e!==E?e:l.searchFields,F.isArray(e)||(e=[e]),t===E||!1===t?(f.error(p.source),[]):(F.each(e,function(e,n){F.each(t,function(e,t){"string"==typeof t[n]&&(-1!==t[n].search(r)?c(o,t):"exact"===l.fullTextSearch&&f.exactSearch(i,t[n])?c(s,t):1==l.fullTextSearch&&f.fuzzySearch(i,t[n])&&c(a,t))})}),F.merge(s,a),F.merge(o,s),o)}},exactSearch:function(e,t){return e=e.toLowerCase(),-1<(t=t.toLowerCase()).indexOf(e)},fuzzySearch:function(e,t){var n=t.length,i=e.length;if("string"!=typeof e)return!1;if(e=e.toLowerCase(),t=t.toLowerCase(),n<i)return!1;if(i===n)return e===t;e:for(var r=0,o=0;r<i;r++){for(var s=e.charCodeAt(r);o<n;)if(t.charCodeAt(o++)===s)continue e;return!1}return!0},parse:{response:function(e,t){var n=f.generateResults(e);f.verbose("Parsing server response",e),e!==E&&t!==E&&e[o.results]!==E&&(f.addResults(n),f.inject.id(e[o.results]),f.write.cache(t,{html:n,results:e[o.results]}),f.save.results(e[o.results]))}},cancel:{query:function(){f.can.useAPI()&&h.api("abort")}},has:{minimumCharacters:function(){return f.get.value().length>=l.minCharacters},results:function(){return 0!==r.length&&""!=r.html()}},clear:{cache:function(e){var t=h.data(u.cache);e?e&&t&&t[e]&&(f.debug("Removing value from cache",e),delete t[e],h.data(u.cache,t)):(f.debug("Clearing cache",e),h.removeData(u.cache))}},read:{cache:function(e){var t=h.data(u.cache);return!!l.cache&&(f.verbose("Checking cache for generated html for query",e),"object"==typeof t&&t[e]!==E&&t[e])}},create:{categoryResults:function(e){var n={};return F.each(e,function(e,t){t.category&&(n[t.category]===E?(f.verbose("Creating new category of results",t.category),n[t.category]={name:t.category,results:[t]}):n[t.category].results.push(t))}),n},id:function(e,t){var n,i=e+1;return t!==E?(n=String.fromCharCode(97+t)+i,f.verbose("Creating category result id",n)):(n=i,f.verbose("Creating result id",n)),n},results:function(){0===r.length&&(r=F("<div />").addClass(g.results).appendTo(h))}},inject:{result:function(e,t,n){f.verbose("Injecting result into results");var i=n!==E?r.children().eq(n).children(m.results).first().children(m.result).eq(t):r.children(m.result).eq(t);f.verbose("Injecting results metadata",i),i.data(u.result,e)},id:function(i){f.debug("Injecting unique ids into results");var r=0,o=0;return"category"===l.type?F.each(i,function(e,i){o=0,F.each(i.results,function(e,t){var n=i.results[e];n.id===E&&(n.id=f.create.id(o,r)),f.inject.result(n,o,r),o++}),r++}):F.each(i,function(e,t){var n=i[e];n.id===E&&(n.id=f.create.id(o)),f.inject.result(n,o),o++}),i}},save:{results:function(e){f.verbose("Saving current search results to metadata",e),h.data(u.results,e)}},write:{cache:function(e,t){var n=h.data(u.cache)!==E?h.data(u.cache):{};l.cache&&(f.verbose("Writing generated html to cache",e,t),n[e]=t,h.data(u.cache,n))}},addResults:function(e){if(F.isFunction(l.onResultsAdd)&&!1===l.onResultsAdd.call(r,e))return f.debug("onResultsAdd callback cancelled default action"),!1;e?(r.html(e),f.refreshResults(),l.selectFirstResult&&f.select.firstResult(),f.showResults()):f.hideResults(function(){r.empty()})},showResults:function(e){e=F.isFunction(e)?e:function(){},x||!f.is.visible()&&f.has.results()&&(f.can.transition()?(f.debug("Showing results with css animations"),r.transition({animation:l.transition+" in",debug:l.debug,verbose:l.verbose,duration:l.duration,onComplete:function(){e()},queue:!0})):(f.debug("Showing results with javascript"),r.stop().fadeIn(l.duration,l.easing)),l.onResultsOpen.call(r))},hideResults:function(e){e=F.isFunction(e)?e:function(){},f.is.visible()&&(f.can.transition()?(f.debug("Hiding results with css animations"),r.transition({animation:l.transition+" out",debug:l.debug,verbose:l.verbose,duration:l.duration,onComplete:function(){e()},queue:!0})):(f.debug("Hiding results with javascript"),r.stop().fadeOut(l.duration,l.easing)),l.onResultsClose.call(r))},generateResults:function(e){f.debug("Generating html from response",e);var t=l.templates[l.type],n=F.isPlainObject(e[o.results])&&!F.isEmptyObject(e[o.results]),i=F.isArray(e[o.results])&&0<e[o.results].length,r="";return n||i?(0<l.maxResults&&(n?"standard"==l.type&&f.error(p.maxResults):e[o.results]=e[o.results].slice(0,l.maxResults)),F.isFunction(t)?r=t(e,o):f.error(p.noTemplate,!1)):l.showNoResults&&(r=f.displayMessage(p.noResults,"empty")),l.onResults.call(v,e),r},displayMessage:function(e,t){return t=t||"standard",f.debug("Displaying message",e,t),f.addResults(l.templates.message(e,t)),l.templates.message(e,t)},setting:function(e,t){if(F.isPlainObject(e))F.extend(!0,l,e);else{if(t===E)return l[e];l[e]=t}},internal:function(e,t){if(F.isPlainObject(e))F.extend(!0,f,e);else{if(t===E)return f[e];f[e]=t}},debug:function(){!l.silent&&l.debug&&(l.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,l.name+":"),f.debug.apply(console,arguments)))},verbose:function(){!l.silent&&l.verbose&&l.debug&&(l.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,l.name+":"),f.verbose.apply(console,arguments)))},error:function(){l.silent||(f.error=Function.prototype.bind.call(console.error,console,l.name+":"),f.error.apply(console,arguments))},performance:{log:function(e){var t,n;l.performance&&(n=(t=(new Date).getTime())-(T||t),T=t,S.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:v,"Execution Time":n})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,500)},display:function(){var e=l.name+":",n=0;T=!1,clearTimeout(f.performance.timer),F.each(S,function(e,t){n+=t["Execution Time"]}),e+=" "+n+"ms",w&&(e+=" '"+w+"'"),1<C.length&&(e+=" ("+C.length+")"),(console.group!==E||console.table!==E)&&0<S.length&&(console.groupCollapsed(e),console.table?console.table(S):F.each(S,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),S=[]}},invoke:function(i,e,t){var r,o,n,s=a;return e=e||A,t=v||t,"string"==typeof i&&s!==E&&(i=i.split(/[\. ]/),r=i.length-1,F.each(i,function(e,t){var n=e!=r?t+i[e+1].charAt(0).toUpperCase()+i[e+1].slice(1):i;if(F.isPlainObject(s[n])&&e!=r)s=s[n];else{if(s[n]!==E)return o=s[n],!1;if(!F.isPlainObject(s[t])||e==r)return s[t]!==E&&(o=s[t]),!1;s=s[t]}})),F.isFunction(o)?n=o.apply(t,e):o!==E&&(n=o),F.isArray(R)?R.push(n):R!==E?R=[R,n]:n!==E&&(R=n),o}},q?(a===E&&f.initialize(),f.invoke(k)):(a!==E&&a.invoke("destroy"),f.initialize())}),R!==E?R:this},F.fn.search.settings={name:"Search",namespace:"search",silent:!1,debug:!1,verbose:!1,performance:!0,type:"standard",minCharacters:1,selectFirstResult:!1,apiSettings:!1,source:!1,searchOnFocus:!0,searchFields:["title","description"],displayField:"",fullTextSearch:"exact",automatic:!0,hideDelay:0,searchDelay:200,maxResults:7,cache:!0,showNoResults:!0,transition:"scale",duration:200,easing:"easeOutExpo",onSelect:!1,onResultsAdd:!1,onSearchQuery:function(e){},onResults:function(e){},onResultsOpen:function(){},onResultsClose:function(){},className:{animating:"animating",active:"active",empty:"empty",focus:"focus",hidden:"hidden",loading:"loading",results:"results",pressed:"down"},error:{source:"Cannot search. No source used, and Semantic API module was not included",noResults:"Your search returned no results",logging:"Error in debug logging, exiting.",noEndpoint:"No search endpoint was specified",noTemplate:"A valid template name was not specified.",oldSearchSyntax:"searchFullText setting has been renamed fullTextSearch for consistency, please adjust your settings.",serverError:"There was an issue querying the server.",maxResults:"Results must be an array to use maxResults setting",method:"The method you called is not defined."},metadata:{cache:"cache",results:"results",result:"result"},regExp:{escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,beginsWith:"(?:s|^)"},fields:{categories:"results",categoryName:"name",categoryResults:"results",description:"description",image:"image",price:"price",results:"results",title:"title",url:"url",action:"action",actionText:"text",actionURL:"url"},selector:{prompt:".prompt",searchButton:".search.button",results:".results",message:".results > .message",category:".category",result:".result",title:".title, .name"},templates:{escape:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};return/[&<>"'`]/.test(e)?e.replace(/[&<>"'`]/g,function(e){return t[e]}):e},message:function(e,t){var n="";return e!==E&&t!==E&&(n+='<div class="message '+t+'">',n+="empty"==t?'<div class="header">No Results</div class="header"><div class="description">'+e+'</div class="description">':' <div class="description">'+e+"</div>",n+="</div>"),n},category:function(e,n){var i="";F.fn.search.settings.templates.escape;return e[n.categoryResults]!==E&&(F.each(e[n.categoryResults],function(e,t){t[n.results]!==E&&0<t.results.length&&(i+='<div class="category">',t[n.categoryName]!==E&&(i+='<div class="name">'+t[n.categoryName]+"</div>"),i+='<div class="results">',F.each(t.results,function(e,t){t[n.url]?i+='<a class="result" href="'+t[n.url]+'">':i+='<a class="result">',t[n.image]!==E&&(i+='<div class="image"> <img src="'+t[n.image]+'"></div>'),i+='<div class="content">',t[n.price]!==E&&(i+='<div class="price">'+t[n.price]+"</div>"),t[n.title]!==E&&(i+='<div class="title">'+t[n.title]+"</div>"),t[n.description]!==E&&(i+='<div class="description">'+t[n.description]+"</div>"),i+="</div>",i+="</a>"}),i+="</div>",i+="</div>")}),e[n.action]&&(i+='<a href="'+e[n.action][n.actionURL]+'" class="action">'+e[n.action][n.actionText]+"</a>"),i)},standard:function(e,n){var i="";return e[n.results]!==E&&(F.each(e[n.results],function(e,t){t[n.url]?i+='<a class="result" href="'+t[n.url]+'">':i+='<a class="result">',t[n.image]!==E&&(i+='<div class="image"> <img src="'+t[n.image]+'"></div>'),i+='<div class="content">',t[n.price]!==E&&(i+='<div class="price">'+t[n.price]+"</div>"),t[n.title]!==E&&(i+='<div class="title">'+t[n.title]+"</div>"),t[n.description]!==E&&(i+='<div class="description">'+t[n.description]+"</div>"),i+="</div>",i+="</a>"}),e[n.action]&&(i+='<a href="'+e[n.action][n.actionURL]+'" class="action">'+e[n.action][n.actionText]+"</a>"),i)}}}}(jQuery,window,document),function(O,D,z,N){"use strict";D=void 0!==D&&D.Math==Math?D:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),O.fn.sidebar=function(x){var R,e=O(this),C=O(D),w=O(z),T=O("html"),S=O("head"),k=e.selector||"",q=(new Date).getTime(),A=[],F=x,j="string"==typeof F,P=[].slice.call(arguments,1),E=D.requestAnimationFrame||D.mozRequestAnimationFrame||D.webkitRequestAnimationFrame||D.msRequestAnimationFrame||function(e){setTimeout(e,0)};return e.each(function(){var s,a,e,t,c,l,u=O.isPlainObject(x)?O.extend(!0,{},O.fn.sidebar.settings,x):O.extend({},O.fn.sidebar.settings),n=u.selector,o=u.className,i=u.namespace,r=u.regExp,d=u.error,f="."+i,g="module-"+i,m=O(this),p=O(u.context),h=m.children(n.sidebar),b=(p.children(n.fixed),p.children(n.pusher)),v=this,y=m.data(g);l={initialize:function(){l.debug("Initializing sidebar",x),l.create.id(),c=l.get.transitionEvent(),u.delaySetup?E(l.setup.layout):l.setup.layout(),E(function(){l.setup.cache()}),l.instantiate()},instantiate:function(){l.verbose("Storing instance of module",l),y=l,m.data(g,l)},create:{id:function(){e=(Math.random().toString(16)+"000000000").substr(2,8),a="."+e,l.verbose("Creating unique id for element",e)}},destroy:function(){l.verbose("Destroying previous module for",m),m.off(f).removeData(g),l.is.ios()&&l.remove.ios(),p.off(a),C.off(a),w.off(a)},event:{clickaway:function(e){var t=0<b.find(e.target).length||b.is(e.target),n=p.is(e.target);t&&(l.verbose("User clicked on dimmed page"),l.hide()),n&&(l.verbose("User clicked on dimmable context (scaled out page)"),l.hide())},touch:function(e){},containScroll:function(e){v.scrollTop<=0&&(v.scrollTop=1),v.scrollTop+v.offsetHeight>=v.scrollHeight&&(v.scrollTop=v.scrollHeight-v.offsetHeight-1)},scroll:function(e){0===O(e.target).closest(n.sidebar).length&&e.preventDefault()}},bind:{clickaway:function(){l.verbose("Adding clickaway events to context",p),u.closable&&p.on("click"+a,l.event.clickaway).on("touchend"+a,l.event.clickaway)},scrollLock:function(){u.scrollLock&&(l.debug("Disabling page scroll"),C.on("DOMMouseScroll"+a,l.event.scroll)),l.verbose("Adding events to contain sidebar scroll"),w.on("touchmove"+a,l.event.touch),m.on("scroll"+f,l.event.containScroll)}},unbind:{clickaway:function(){l.verbose("Removing clickaway events from context",p),p.off(a)},scrollLock:function(){l.verbose("Removing scroll lock from page"),w.off(a),C.off(a),m.off("scroll"+f)}},add:{inlineCSS:function(){var e,t=l.cache.width||m.outerWidth(),n=l.cache.height||m.outerHeight(),i=l.is.rtl(),r=l.get.direction(),o={left:t,right:-t,top:n,bottom:-n};i&&(l.verbose("RTL detected, flipping widths"),o.left=-t,o.right=t),e="<style>","left"===r||"right"===r?(l.debug("Adding CSS rules for animation distance",t),e+=" .ui.visible."+r+".sidebar ~ .fixed, .ui.visible."+r+".sidebar ~ .pusher {   -webkit-transform: translate3d("+o[r]+"px, 0, 0);           transform: translate3d("+o[r]+"px, 0, 0); }"):"top"!==r&&"bottom"!=r||(e+=" .ui.visible."+r+".sidebar ~ .fixed, .ui.visible."+r+".sidebar ~ .pusher {   -webkit-transform: translate3d(0, "+o[r]+"px, 0);           transform: translate3d(0, "+o[r]+"px, 0); }"),l.is.ie()&&("left"===r||"right"===r?(l.debug("Adding CSS rules for animation distance",t),e+=" body.pushable > .ui.visible."+r+".sidebar ~ .pusher:after {   -webkit-transform: translate3d("+o[r]+"px, 0, 0);           transform: translate3d("+o[r]+"px, 0, 0); }"):"top"!==r&&"bottom"!=r||(e+=" body.pushable > .ui.visible."+r+".sidebar ~ .pusher:after {   -webkit-transform: translate3d(0, "+o[r]+"px, 0);           transform: translate3d(0, "+o[r]+"px, 0); }"),e+=" body.pushable > .ui.visible.left.sidebar ~ .ui.visible.right.sidebar ~ .pusher:after, body.pushable > .ui.visible.right.sidebar ~ .ui.visible.left.sidebar ~ .pusher:after {   -webkit-transform: translate3d(0px, 0, 0);           transform: translate3d(0px, 0, 0); }"),s=O(e+="</style>").appendTo(S),l.debug("Adding sizing css to head",s)}},refresh:function(){l.verbose("Refreshing selector cache"),p=O(u.context),h=p.children(n.sidebar),b=p.children(n.pusher),p.children(n.fixed),l.clear.cache()},refreshSidebars:function(){l.verbose("Refreshing other sidebars"),h=p.children(n.sidebar)},repaint:function(){l.verbose("Forcing repaint event"),v.style.display="none";v.offsetHeight;v.scrollTop=v.scrollTop,v.style.display=""},setup:{cache:function(){l.cache={width:m.outerWidth(),height:m.outerHeight(),rtl:"rtl"==m.css("direction")}},layout:function(){0===p.children(n.pusher).length&&(l.debug("Adding wrapper element for sidebar"),l.error(d.pusher),b=O('<div class="pusher" />'),p.children().not(n.omitted).not(h).wrapAll(b),l.refresh()),0!==m.nextAll(n.pusher).length&&m.nextAll(n.pusher)[0]===b[0]||(l.debug("Moved sidebar to correct parent element"),l.error(d.movedSidebar,v),m.detach().prependTo(p),l.refresh()),l.clear.cache(),l.set.pushable(),l.set.direction()}},attachEvents:function(e,t){var n=O(e);t=O.isFunction(l[t])?l[t]:l.toggle,0<n.length?(l.debug("Attaching sidebar events to element",e,t),n.on("click"+f,t)):l.error(d.notFound,e)},show:function(e){if(e=O.isFunction(e)?e:function(){},l.is.hidden()){if(l.refreshSidebars(),u.overlay&&(l.error(d.overlay),u.transition="overlay"),l.refresh(),l.othersActive())if(l.debug("Other sidebars currently visible"),u.exclusive){if("overlay"!=u.transition)return void l.hideOthers(l.show);l.hideOthers()}else u.transition="overlay";l.pushPage(function(){e.call(v),u.onShow.call(v)}),u.onChange.call(v),u.onVisible.call(v)}else l.debug("Sidebar is already visible")},hide:function(e){e=O.isFunction(e)?e:function(){},(l.is.visible()||l.is.animating())&&(l.debug("Hiding sidebar",e),l.refreshSidebars(),l.pullPage(function(){e.call(v),u.onHidden.call(v)}),u.onChange.call(v),u.onHide.call(v))},othersAnimating:function(){return 0<h.not(m).filter("."+o.animating).length},othersVisible:function(){return 0<h.not(m).filter("."+o.visible).length},othersActive:function(){return l.othersVisible()||l.othersAnimating()},hideOthers:function(e){var t=h.not(m).filter("."+o.visible),n=t.length,i=0;e=e||function(){},t.sidebar("hide",function(){++i==n&&e()})},toggle:function(){l.verbose("Determining toggled direction"),l.is.hidden()?l.show():l.hide()},pushPage:function(t){var e,n,i,r=l.get.transition(),o="overlay"===r||l.othersActive()?m:b;t=O.isFunction(t)?t:function(){},"scale down"==u.transition&&l.scrollToTop(),l.set.transition(r),l.repaint(),e=function(){l.bind.clickaway(),l.add.inlineCSS(),l.set.animating(),l.set.visible()},n=function(){l.set.dimmed()},i=function(e){e.target==o[0]&&(o.off(c+a,i),l.remove.animating(),l.bind.scrollLock(),t.call(v))},o.off(c+a),o.on(c+a,i),E(e),u.dimPage&&!l.othersVisible()&&E(n)},pullPage:function(t){var e,n,i=l.get.transition(),r="overlay"==i||l.othersActive()?m:b;t=O.isFunction(t)?t:function(){},l.verbose("Removing context push state",l.get.direction()),l.unbind.clickaway(),l.unbind.scrollLock(),e=function(){l.set.transition(i),l.set.animating(),l.remove.visible(),u.dimPage&&!l.othersVisible()&&b.removeClass(o.dimmed)},n=function(e){e.target==r[0]&&(r.off(c+a,n),l.remove.animating(),l.remove.transition(),l.remove.inlineCSS(),("scale down"==i||u.returnScroll&&l.is.mobile())&&l.scrollBack(),t.call(v))},r.off(c+a),r.on(c+a,n),E(e)},scrollToTop:function(){l.verbose("Scrolling to top of page to avoid animation issues"),t=O(D).scrollTop(),m.scrollTop(0),D.scrollTo(0,0)},scrollBack:function(){l.verbose("Scrolling back to original page position"),D.scrollTo(0,t)},clear:{cache:function(){l.verbose("Clearing cached dimensions"),l.cache={}}},set:{ios:function(){T.addClass(o.ios)},pushed:function(){p.addClass(o.pushed)},pushable:function(){p.addClass(o.pushable)},dimmed:function(){b.addClass(o.dimmed)},active:function(){m.addClass(o.active)},animating:function(){m.addClass(o.animating)},transition:function(e){e=e||l.get.transition(),m.addClass(e)},direction:function(e){e=e||l.get.direction(),m.addClass(o[e])},visible:function(){m.addClass(o.visible)},overlay:function(){m.addClass(o.overlay)}},remove:{inlineCSS:function(){l.debug("Removing inline css styles",s),s&&0<s.length&&s.remove()},ios:function(){T.removeClass(o.ios)},pushed:function(){p.removeClass(o.pushed)},pushable:function(){p.removeClass(o.pushable)},active:function(){m.removeClass(o.active)},animating:function(){m.removeClass(o.animating)},transition:function(e){e=e||l.get.transition(),m.removeClass(e)},direction:function(e){e=e||l.get.direction(),m.removeClass(o[e])},visible:function(){m.removeClass(o.visible)},overlay:function(){m.removeClass(o.overlay)}},get:{direction:function(){return m.hasClass(o.top)?o.top:m.hasClass(o.right)?o.right:m.hasClass(o.bottom)?o.bottom:o.left},transition:function(){var e,t=l.get.direction();return e=l.is.mobile()?"auto"==u.mobileTransition?u.defaultTransition.mobile[t]:u.mobileTransition:"auto"==u.transition?u.defaultTransition.computer[t]:u.transition,l.verbose("Determined transition",e),e},transitionEvent:function(){var e,t=z.createElement("element"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(t.style[e]!==N)return n[e]}},is:{ie:function(){return!D.ActiveXObject&&"ActiveXObject"in D||"ActiveXObject"in D},ios:function(){var e=navigator.userAgent,t=e.match(r.ios),n=e.match(r.mobileChrome);return!(!t||n)&&(l.verbose("Browser was found to be iOS",e),!0)},mobile:function(){var e=navigator.userAgent;return e.match(r.mobile)?(l.verbose("Browser was found to be mobile",e),!0):(l.verbose("Browser is not mobile, using regular transition",e),!1)},hidden:function(){return!l.is.visible()},visible:function(){return m.hasClass(o.visible)},open:function(){return l.is.visible()},closed:function(){return l.is.hidden()},vertical:function(){return m.hasClass(o.top)},animating:function(){return p.hasClass(o.animating)},rtl:function(){return l.cache.rtl===N&&(l.cache.rtl="rtl"==m.css("direction")),l.cache.rtl}},setting:function(e,t){if(l.debug("Changing setting",e,t),O.isPlainObject(e))O.extend(!0,u,e);else{if(t===N)return u[e];O.isPlainObject(u[e])?O.extend(!0,u[e],t):u[e]=t}},internal:function(e,t){if(O.isPlainObject(e))O.extend(!0,l,e);else{if(t===N)return l[e];l[e]=t}},debug:function(){!u.silent&&u.debug&&(u.performance?l.performance.log(arguments):(l.debug=Function.prototype.bind.call(console.info,console,u.name+":"),l.debug.apply(console,arguments)))},verbose:function(){!u.silent&&u.verbose&&u.debug&&(u.performance?l.performance.log(arguments):(l.verbose=Function.prototype.bind.call(console.info,console,u.name+":"),l.verbose.apply(console,arguments)))},error:function(){u.silent||(l.error=Function.prototype.bind.call(console.error,console,u.name+":"),l.error.apply(console,arguments))},performance:{log:function(e){var t,n;u.performance&&(n=(t=(new Date).getTime())-(q||t),q=t,A.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:v,"Execution Time":n})),clearTimeout(l.performance.timer),l.performance.timer=setTimeout(l.performance.display,500)},display:function(){var e=u.name+":",n=0;q=!1,clearTimeout(l.performance.timer),O.each(A,function(e,t){n+=t["Execution Time"]}),e+=" "+n+"ms",k&&(e+=" '"+k+"'"),(console.group!==N||console.table!==N)&&0<A.length&&(console.groupCollapsed(e),console.table?console.table(A):O.each(A,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),A=[]}},invoke:function(i,e,t){var r,o,n,s=y;return e=e||P,t=v||t,"string"==typeof i&&s!==N&&(i=i.split(/[\. ]/),r=i.length-1,O.each(i,function(e,t){var n=e!=r?t+i[e+1].charAt(0).toUpperCase()+i[e+1].slice(1):i;if(O.isPlainObject(s[n])&&e!=r)s=s[n];else{if(s[n]!==N)return o=s[n],!1;if(!O.isPlainObject(s[t])||e==r)return s[t]!==N?o=s[t]:l.error(d.method,i),!1;s=s[t]}})),O.isFunction(o)?n=o.apply(t,e):o!==N&&(n=o),O.isArray(R)?R.push(n):R!==N?R=[R,n]:n!==N&&(R=n),o}},j?(y===N&&l.initialize(),l.invoke(F)):(y!==N&&l.invoke("destroy"),l.initialize())}),R!==N?R:this},O.fn.sidebar.settings={name:"Sidebar",namespace:"sidebar",silent:!1,debug:!1,verbose:!1,performance:!0,transition:"auto",mobileTransition:"auto",defaultTransition:{computer:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"},mobile:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"}},context:"body",exclusive:!1,closable:!0,dimPage:!0,scrollLock:!1,returnScroll:!1,delaySetup:!1,duration:500,onChange:function(){},onShow:function(){},onHide:function(){},onHidden:function(){},onVisible:function(){},className:{active:"active",animating:"animating",dimmed:"dimmed",ios:"ios",pushable:"pushable",pushed:"pushed",right:"right",top:"top",left:"left",bottom:"bottom",visible:"visible"},selector:{fixed:".fixed",omitted:"script, link, style, .ui.modal, .ui.dimmer, .ui.nag, .ui.fixed",pusher:".pusher",sidebar:".ui.sidebar"},regExp:{ios:/(iPad|iPhone|iPod)/g,mobileChrome:/(CriOS)/g,mobile:/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/g},error:{method:"The method you called is not defined.",pusher:"Had to add pusher element. For optimal performance make sure body content is inside a pusher element",movedSidebar:"Had to move sidebar. For optimal performance make sure sidebar and pusher are direct children of your body tag",overlay:"The overlay setting is no longer supported, use animation: overlay",notFound:"There were no elements that matched the specified selector"}}}(jQuery,window,document),function(A,F,e,j){"use strict";F=void 0!==F&&F.Math==Math?F:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();A.api=A.fn.api=function(x){var R,e=A.isFunction(this)?A(F):A(this),C=e.selector||"",w=(new Date).getTime(),T=[],S=x,k="string"==typeof S,q=[].slice.call(arguments,1);return e.each(function(){var o,s,n,e,a,c,l=A.isPlainObject(x)?A.extend(!0,{},A.fn.api.settings,x):A.extend({},A.fn.api.settings),t=l.namespace,i=l.metadata,r=l.selector,u=l.error,d=l.className,f="."+t,g="module-"+t,m=A(this),p=m.closest(r.form),h=l.stateContext?A(l.stateContext):m,b=this,v=h[0],y=m.data(g);c={initialize:function(){k||c.bind.events(),c.instantiate()},instantiate:function(){c.verbose("Storing instance of module",c),y=c,m.data(g,y)},destroy:function(){c.verbose("Destroying previous module for",b),m.removeData(g).off(f)},bind:{events:function(){var e=c.get.event();e?(c.verbose("Attaching API events to element",e),m.on(e+f,c.event.trigger)):"now"==l.on&&(c.debug("Querying API endpoint immediately"),c.query())}},decode:{json:function(e){if(e!==j&&"string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}},read:{cachedResponse:function(e){var t;if(F.Storage!==j)return t=sessionStorage.getItem(e),c.debug("Using cached response",e,t),t=c.decode.json(t);c.error(u.noStorage)}},write:{cachedResponse:function(e,t){t&&""===t?c.debug("Response empty, not caching",t):F.Storage!==j?(A.isPlainObject(t)&&(t=JSON.stringify(t)),sessionStorage.setItem(e,t),c.verbose("Storing cached response for url",e,t)):c.error(u.noStorage)}},query:function(){if(c.is.disabled())c.debug("Element is disabled API request aborted");else{if(c.is.loading()){if(!l.interruptRequests)return void c.debug("Cancelling request, previous request is still pending");c.debug("Interrupting previous request"),c.abort()}if(l.defaultData&&A.extend(!0,l.urlData,c.get.defaultData()),l.serializeForm&&(l.data=c.add.formData(l.data)),!1===(s=c.get.settings()))return c.cancelled=!0,void c.error(u.beforeSend);if(c.cancelled=!1,(n=c.get.templatedURL())||c.is.mocked()){if((n=c.add.urlData(n))||c.is.mocked()){if(s.url=l.base+n,o=A.extend(!0,{},l,{type:l.method||l.type,data:e,url:l.base+n,beforeSend:l.beforeXHR,success:function(){},failure:function(){},complete:function(){}}),c.debug("Querying URL",o.url),c.verbose("Using AJAX settings",o),"local"===l.cache&&c.read.cachedResponse(n))return c.debug("Response returned from local cache"),c.request=c.create.request(),void c.request.resolveWith(v,[c.read.cachedResponse(n)]);l.throttle?l.throttleFirstRequest||c.timer?(c.debug("Throttling request",l.throttle),clearTimeout(c.timer),c.timer=setTimeout(function(){c.timer&&delete c.timer,c.debug("Sending throttled request",e,o.method),c.send.request()},l.throttle)):(c.debug("Sending request",e,o.method),c.send.request(),c.timer=setTimeout(function(){},l.throttle)):(c.debug("Sending request",e,o.method),c.send.request())}}else c.error(u.missingURL)}},should:{removeError:function(){return!0===l.hideError||"auto"===l.hideError&&!c.is.form()}},is:{disabled:function(){return 0<m.filter(r.disabled).length},expectingJSON:function(){return"json"===l.dataType||"jsonp"===l.dataType},form:function(){return m.is("form")||h.is("form")},mocked:function(){return l.mockResponse||l.mockResponseAsync||l.response||l.responseAsync},input:function(){return m.is("input")},loading:function(){return!!c.request&&"pending"==c.request.state()},abortedRequest:function(e){return e&&e.readyState!==j&&0===e.readyState?(c.verbose("XHR request determined to be aborted"),!0):(c.verbose("XHR request was not aborted"),!1)},validResponse:function(e){return c.is.expectingJSON()&&A.isFunction(l.successTest)?(c.debug("Checking JSON returned success",l.successTest,e),l.successTest(e)?(c.debug("Response passed success test",e),!0):(c.debug("Response failed success test",e),!1)):(c.verbose("Response is not JSON, skipping validation",l.successTest,e),!0)}},was:{cancelled:function(){return c.cancelled||!1},succesful:function(){return c.request&&"resolved"==c.request.state()},failure:function(){return c.request&&"rejected"==c.request.state()},complete:function(){return c.request&&("resolved"==c.request.state()||"rejected"==c.request.state())}},add:{urlData:function(r,o){var e,t;return r&&(e=r.match(l.regExp.required),t=r.match(l.regExp.optional),o=o||l.urlData,e&&(c.debug("Looking for required URL variables",e),A.each(e,function(e,t){var n=-1!==t.indexOf("$")?t.substr(2,t.length-3):t.substr(1,t.length-2),i=A.isPlainObject(o)&&o[n]!==j?o[n]:m.data(n)!==j?m.data(n):h.data(n)!==j?h.data(n):o[n];if(i===j)return c.error(u.requiredParameter,n,r),r=!1;c.verbose("Found required variable",n,i),i=l.encodeParameters?c.get.urlEncodedValue(i):i,r=r.replace(t,i)})),t&&(c.debug("Looking for optional URL variables",e),A.each(t,function(e,t){var n=-1!==t.indexOf("$")?t.substr(3,t.length-4):t.substr(2,t.length-3),i=A.isPlainObject(o)&&o[n]!==j?o[n]:m.data(n)!==j?m.data(n):h.data(n)!==j?h.data(n):o[n];r=i!==j?(c.verbose("Optional variable Found",n,i),r.replace(t,i)):(c.verbose("Optional variable not found",n),-1!==r.indexOf("/"+t)?r.replace("/"+t,""):r.replace(t,""))}))),r},formData:function(e){var t=A.fn.serializeObject!==j,n=t?p.serializeObject():p.serialize();return e=e||l.data,e=A.isPlainObject(e)?t?(c.debug("Extending existing data with form data",e,n),A.extend(!0,{},e,n)):(c.error(u.missingSerialize),c.debug("Cant extend data. Replacing data with form data",e,n),n):(c.debug("Adding form data",n),n)}},send:{request:function(){c.set.loading(),c.request=c.create.request(),c.is.mocked()?c.mockedXHR=c.create.mockedXHR():c.xhr=c.create.xhr(),l.onRequest.call(v,c.request,c.xhr)}},event:{trigger:function(e){c.query(),"submit"!=e.type&&"click"!=e.type||e.preventDefault()},xhr:{always:function(){},done:function(e,t,n){var i=this,r=(new Date).getTime()-a,o=l.loadingDuration-r,s=!!A.isFunction(l.onResponse)&&(c.is.expectingJSON()?l.onResponse.call(i,A.extend(!0,{},e)):l.onResponse.call(i,e));o=0<o?o:0,s&&(c.debug("Modified API response in onResponse callback",l.onResponse,s,e),e=s),0<o&&c.debug("Response completed early delaying state change by",o),setTimeout(function(){c.is.validResponse(e)?c.request.resolveWith(i,[e,n]):c.request.rejectWith(i,[n,"invalid"])},o)},fail:function(e,t,n){var i=this,r=(new Date).getTime()-a,o=l.loadingDuration-r;0<(o=0<o?o:0)&&c.debug("Response completed early delaying state change by",o),setTimeout(function(){c.is.abortedRequest(e)?c.request.rejectWith(i,[e,"aborted",n]):c.request.rejectWith(i,[e,"error",t,n])},o)}},request:{done:function(e,t){c.debug("Successful API Response",e),"local"===l.cache&&n&&(c.write.cachedResponse(n,e),c.debug("Saving server response locally",c.cache)),l.onSuccess.call(v,e,m,t)},complete:function(e,t){var n,i;c.was.succesful()?(i=e,n=t):(n=e,i=c.get.responseFromXHR(n)),c.remove.loading(),l.onComplete.call(v,i,m,n)},fail:function(e,t,n){var i=c.get.responseFromXHR(e),r=c.get.errorFromRequest(i,t,n);if("aborted"==t)return c.debug("XHR Aborted (Most likely caused by page navigation or CORS Policy)",t,n),l.onAbort.call(v,t,m,e),!0;"invalid"==t?c.debug("JSON did not pass success test. A server-side error has most likely occurred",i):"error"==t&&e!==j&&(c.debug("XHR produced a server error",t,n),200!=e.status&&n!==j&&""!==n&&c.error(u.statusMessage+n,o.url),l.onError.call(v,r,m,e)),l.errorDuration&&"aborted"!==t&&(c.debug("Adding error state"),c.set.error(),c.should.removeError()&&setTimeout(c.remove.error,l.errorDuration)),c.debug("API Request failed",r,e),l.onFailure.call(v,i,m,e)}}},create:{request:function(){return A.Deferred().always(c.event.request.complete).done(c.event.request.done).fail(c.event.request.fail)},mockedXHR:function(){var e,t,n,i=l.mockResponse||l.response,r=l.mockResponseAsync||l.responseAsync;return n=A.Deferred().always(c.event.xhr.complete).done(c.event.xhr.done).fail(c.event.xhr.fail),i?(t=A.isFunction(i)?(c.debug("Using specified synchronous callback",i),i.call(v,s)):(c.debug("Using settings specified response",i),i),n.resolveWith(v,[t,!1,{responseText:t}])):A.isFunction(r)&&(e=function(e){c.debug("Async callback returned response",e),e?n.resolveWith(v,[e,!1,{responseText:e}]):n.rejectWith(v,[{responseText:e},!1,!1])},c.debug("Using specified async response callback",r),r.call(v,s,e)),n},xhr:function(){var e;return e=A.ajax(o).always(c.event.xhr.always).done(c.event.xhr.done).fail(c.event.xhr.fail),c.verbose("Created server request",e,o),e}},set:{error:function(){c.verbose("Adding error state to element",h),h.addClass(d.error)},loading:function(){c.verbose("Adding loading state to element",h),h.addClass(d.loading),a=(new Date).getTime()}},remove:{error:function(){c.verbose("Removing error state from element",h),h.removeClass(d.error)},loading:function(){c.verbose("Removing loading state from element",h),h.removeClass(d.loading)}},get:{responseFromXHR:function(e){return!!A.isPlainObject(e)&&(c.is.expectingJSON()?c.decode.json(e.responseText):e.responseText)},errorFromRequest:function(e,t,n){return A.isPlainObject(e)&&e.error!==j?e.error:l.error[t]!==j?l.error[t]:n},request:function(){return c.request||!1},xhr:function(){return c.xhr||!1},settings:function(){var e;return(e=l.beforeSend.call(v,l))&&(e.success!==j&&(c.debug("Legacy success callback detected",e),c.error(u.legacyParameters,e.success),e.onSuccess=e.success),e.failure!==j&&(c.debug("Legacy failure callback detected",e),c.error(u.legacyParameters,e.failure),e.onFailure=e.failure),e.complete!==j&&(c.debug("Legacy complete callback detected",e),c.error(u.legacyParameters,e.complete),e.onComplete=e.complete)),e===j&&c.error(u.noReturnedValue),!1===e?e:e!==j?A.extend(!0,{},e):A.extend(!0,{},l)},urlEncodedValue:function(e){var t=F.decodeURIComponent(e),n=F.encodeURIComponent(e);return t!==e?(c.debug("URL value is already encoded, avoiding double encoding",e),e):(c.verbose("Encoding value using encodeURIComponent",e,n),n)},defaultData:function(){var e={};return A.isWindow(b)||(c.is.input()?e.value=m.val():c.is.form()||(e.text=m.text())),e},event:function(){return A.isWindow(b)||"now"==l.on?(c.debug("API called without element, no events attached"),!1):"auto"==l.on?m.is("input")?b.oninput!==j?"input":b.onpropertychange!==j?"propertychange":"keyup":m.is("form")?"submit":"click":l.on},templatedURL:function(e){if(e=e||m.data(i.action)||l.action||!1,n=m.data(i.url)||l.url||!1)return c.debug("Using specified url",n),n;if(e){if(c.debug("Looking up url for action",e,l.api),l.api[e]===j&&!c.is.mocked())return void c.error(u.missingAction,l.action,l.api);n=l.api[e]}else c.is.form()&&(n=m.attr("action")||h.attr("action")||!1,c.debug("No url or action specified, defaulting to form action",n));return n}},abort:function(){var e=c.get.xhr();e&&"resolved"!==e.state()&&(c.debug("Cancelling API request"),e.abort())},reset:function(){c.remove.error(),c.remove.loading()},setting:function(e,t){if(c.debug("Changing setting",e,t),A.isPlainObject(e))A.extend(!0,l,e);else{if(t===j)return l[e];A.isPlainObject(l[e])?A.extend(!0,l[e],t):l[e]=t}},internal:function(e,t){if(A.isPlainObject(e))A.extend(!0,c,e);else{if(t===j)return c[e];c[e]=t}},debug:function(){!l.silent&&l.debug&&(l.performance?c.performance.log(arguments):(c.debug=Function.prototype.bind.call(console.info,console,l.name+":"),c.debug.apply(console,arguments)))},verbose:function(){!l.silent&&l.verbose&&l.debug&&(l.performance?c.performance.log(arguments):(c.verbose=Function.prototype.bind.call(console.info,console,l.name+":"),c.verbose.apply(console,arguments)))},error:function(){l.silent||(c.error=Function.prototype.bind.call(console.error,console,l.name+":"),c.error.apply(console,arguments))},performance:{log:function(e){var t,n;l.performance&&(n=(t=(new Date).getTime())-(w||t),w=t,T.push({Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(c.performance.timer),c.performance.timer=setTimeout(c.performance.display,500)},display:function(){var e=l.name+":",n=0;w=!1,clearTimeout(c.performance.timer),A.each(T,function(e,t){n+=t["Execution Time"]}),e+=" "+n+"ms",C&&(e+=" '"+C+"'"),(console.group!==j||console.table!==j)&&0<T.length&&(console.groupCollapsed(e),console.table?console.table(T):A.each(T,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),T=[]}},invoke:function(i,e,t){var r,o,n,s=y;return e=e||q,t=b||t,"string"==typeof i&&s!==j&&(i=i.split(/[\. ]/),r=i.length-1,A.each(i,function(e,t){var n=e!=r?t+i[e+1].charAt(0).toUpperCase()+i[e+1].slice(1):i;if(A.isPlainObject(s[n])&&e!=r)s=s[n];else{if(s[n]!==j)return o=s[n],!1;if(!A.isPlainObject(s[t])||e==r)return s[t]!==j?o=s[t]:c.error(u.method,i),!1;s=s[t]}})),A.isFunction(o)?n=o.apply(t,e):o!==j&&(n=o),A.isArray(R)?R.push(n):R!==j?R=[R,n]:n!==j&&(R=n),o}},k?(y===j&&c.initialize(),c.invoke(S)):(y!==j&&y.invoke("destroy"),c.initialize())}),R!==j?R:this},A.api.settings={name:"API",namespace:"api",debug:!1,verbose:!1,performance:!0,api:{},cache:!0,interruptRequests:!0,on:"auto",stateContext:!1,loadingDuration:0,hideError:"auto",errorDuration:2e3,encodeParameters:!0,action:!1,url:!1,base:"",urlData:{},defaultData:!0,serializeForm:!1,throttle:0,throttleFirstRequest:!0,method:"get",data:{},dataType:"json",mockResponse:!1,mockResponseAsync:!1,response:!1,responseAsync:!1,beforeSend:function(e){return e},beforeXHR:function(e){},onRequest:function(e,t){},onResponse:!1,onSuccess:function(e,t){},onComplete:function(e,t){},onFailure:function(e,t){},onError:function(e,t){},onAbort:function(e,t){},successTest:!1,error:{beforeSend:"The before send function has aborted the request",error:"There was an error with your request",exitConditions:"API Request Aborted. Exit conditions met",JSONParse:"JSON could not be parsed during error handling",legacyParameters:"You are using legacy API success callback names",method:"The method you called is not defined",missingAction:"API action used but no url was defined",missingSerialize:"jquery-serialize-object is required to add form data to an existing data object",missingURL:"No URL specified for api event",noReturnedValue:"The beforeSend callback must return a settings object, beforeSend ignored.",noStorage:"Caching responses locally requires session storage",parseError:"There was an error parsing your request",requiredParameter:"Missing a required URL parameter: ",statusMessage:"Server gave an error: ",timeout:"Your request timed out"},regExp:{required:/\{\$*[A-z0-9]+\}/g,optional:/\{\/\$*[A-z0-9]+\}/g},className:{loading:"loading",error:"error"},selector:{disabled:".disabled",form:"form"},metadata:{action:"action",url:"url"}}}(jQuery,window,document);